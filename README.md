# Zeebe PHP client

Client for Zeebe (https://zeebe.io) - A Workflow Engine for Microservices Orchestration
This client is autogenerated from Zeebe gateway protobuf definition.

## Test examples
You need php command line : https://www.php.net/downloads.php

You need composer installed : https://getcomposer.org/


## Usage
### building a worker

```php
use Camundity\PhpZeebe\ZeebeWorker;

class SelectAssigneeWorker extends ZeebeWorker {
	
	public function __construct($zeebeClient) {
		parent::__construct($zeebeClient);
		$this->setType("selectAssignee");
    }
	
	
	public function executeTask($activatedJob){
		$variables = $this->getVariables($activatedJob);
		var_dump($variables);
		$variables["assignee1"] = "toto";
		$this->complete($activatedJob, $variables);
	}
}
```

### Creating a client and using it
```php
require_once __DIR__ . '/vendor/autoload.php';
require_once('SelectAssigneeWorker.php');
require_once('MailWorker.php');
use Camundity\PhpZeebe\ZeebeClient;

$client = new ZeebeClient("XXX");
$client->saasAuth("XXX", "XXX");

$client->deployProcess("camunda-process.bpmn");

$client->runInstance("camunda-process2","latest", ["var1"=>"something"]);
$client->publishMessage("messageName","correlationKey", ["var2"=>"someOtherValue"]);

$worker2 = new MailWorker($client);
$worker2->work();
$worker = new SelectAssigneeWorker($client);
$worker->workLoop();
```

## Laravel example
A quick example of use in Laravel : https://github.com/chDame/phpzeebe-laravel-example
Workers are executed as jobs.

### Notes

the workers should be called in separated threads on the back. You can user work() inside a loop mechanisms or directly workLoop() (call stopWorkLoop to stop). This could be managed inside Laravel workers for example.